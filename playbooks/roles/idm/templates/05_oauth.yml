apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: idm-ldap
    mappingMethod: add
    type: LDAP
    ldap:
      attributes:
        id:
        - dn
        email:
        - mail
        name:
        - cn
        preferredUsername:
        - uid
      bindDN: "uid=ocp-bind-user,cn=users,cn=accounts,dc=tmeprj2,dc=comm,dc=red,dc=ibm,dc=gsc"
      bindPassword:
        name: "ldap-secret"
      #ca: 
      #  name: ca-config-map
      insecure: true
      #url: "ldaps://idm-service.mano-apps.svc.cluster.local/cn=accounts,dc=tmeprj2,dc=comm,dc=red,dc=ibm,dc=gsc?uid?sub?(memberOf=cn=ocpusers,cn=groups,cn=accounts,dc=tmeprj2,dc=comm,dc=red,dc=ibm,dc=gsc)"
      url: "ldap://{{ idm1_ip }}/cn=accounts,dc=tmeprj2,dc=comm,dc=red,dc=ibm,dc=gsc?uid"

